/**
 * Loads Appcues tracker.
 *
 * @copyright Copyright (c) 2021 Open LMS
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_liquidus/appcues-lazy",["jquery","core/log"],(function($,Log){var self=this,tracker={};return self.addAnalyticsJS=function(){const dfd=$.Deferred();if(tracker.trackerInfo.accountid)return"undefined"==typeof Appcues?(dfd.fail(),dfd):(self.analytics=Appcues,dfd.resolve(),dfd);Log.debug("Liquidus is misconfigured for Appcues, Account ID is missing.")},tracker.loadTracker=function(trackerInfo){return tracker.trackerInfo=trackerInfo,self.addAnalyticsJS()},tracker.identify=function(){let identifyData={};if(void 0!==tracker.trackerInfo.userProperties)for(const property of tracker.trackerInfo.userProperties)void 0!==tracker.trackerInfo.staticShares[property]&&(identifyData[property]=tracker.trackerInfo.staticShares[property]);else{identifyData={allUserRoles:String(tracker.trackerInfo.staticShares.allUserRoles),userRoleContext:String(tracker.trackerInfo.staticShares.userRoleContext),olmsProduct:String(tracker.trackerInfo.staticShares.olmsProduct),isImpersonated:String(tracker.trackerInfo.staticShares.isImpersonated)}}let deck36Configs=tracker.trackerInfo.deck36properties;if(void 0!==deck36Configs)for(const property in deck36Configs)identifyData[property]="1"===deck36Configs[property]?"true":"false";self.analytics.identify(tracker.trackerInfo.staticShares.userHash,identifyData)},tracker.trackPage=function(){self.analytics.page();let data={};if(tracker.trackerInfo.staticShares.plugins){const plugins=tracker.trackerInfo.staticShares.plugins;Object.entries(plugins).forEach((_ref=>{let[type,value]=_ref;data["PluginsUsed_"+type]=value})),delete tracker.trackerInfo.staticShares.plugins}Object.entries(tracker.trackerInfo.staticShares).forEach((_ref2=>{let[type,value]=_ref2;data[type]=value})),self.analytics.track("Page view",data)},tracker.processEvent=function(dfd,metricName,data){self.analytics.track(metricName,data)},tracker}));

//# sourceMappingURL=appcues-lazy.min.js.map